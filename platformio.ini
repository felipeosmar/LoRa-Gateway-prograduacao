; PlatformIO Project Configuration File
; Gateway LoRa com Placa JVtech MIJ
; ESP32 + SX1276/SX1278

[env:jvtech_mij]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Bibliotecas necessarias
lib_deps =
    sandeepmistry/LoRa@^0.8.0
    bblanchon/ArduinoJson@^7.0.0
    WiFi
    esphome/ESPAsyncWebServer-esphome@^3.2.2

; Ignora bibliotecas externas de LittleFS (usa a built-in)
lib_ignore = LittleFS_esp32

; Configuracoes de build
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM=0
    ; Pinos SPI do LoRa conforme documentacao JVtech MIJ
    -DLORA_SCK=18
    -DLORA_MISO=19
    -DLORA_MOSI=23
    -DLORA_CS=5
    -DLORA_RST=14
    -DLORA_DIO0=26
    ; Frequencia LoRa Brasil (AU915)
    -DLORA_FREQUENCY=915000000
    ; Potencia de transmissao (max 20dBm)
    -DLORA_TX_POWER=20
    ; Spreading Factor (7-12)
    -DLORA_SF=7
    ; Bandwidth (125kHz, 250kHz, 500kHz)
    -DLORA_BW=125000
    ; Coding Rate (5-8)
    -DLORA_CR=5

; Configuracao de particoes para 2MB Flash
board_build.partitions = partitions_2mb.csv
board_build.flash_size = 2MB
board_upload.flash_size = 2MB
board_build.f_flash = 40000000L
board_build.flash_mode = dio

; Sistema de arquivos LittleFS
board_build.filesystem = littlefs

; Monitor filters
monitor_filters =
    esp32_exception_decoder
    default
